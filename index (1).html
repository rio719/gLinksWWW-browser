
<!DOCTYPE html> 
<html>
<head>
  <style>
    /* index.html */
    body { margin: 0; background: #ffffff; font-family: 'Times New Roman', serif; }
    .toolbar1 { 
      height: 30px; display: flex; align-items: center; padding: 0 10px; gap: 10px; background: #b89f79;
      border-top: 2px solid #ffffff; border-left: 2px solid #fff;
      border-right: 2px solid #292929; border-bottom: 2px solid  #292929;
    }
    .toolbar { 
      height: 40px; display: flex; align-items: center; padding: 0 10px; gap: 10px; background: #b89f79;
      border-top: 2px solid #ffffff; border-left: 2px solid #fff;
      border-right: 2px solid #292929; border-bottom: 2px solid  #292929;
    }
    input { 
      outline: none; /* ì£¼í™©ìƒ‰ í…Œë‘ë¦¬ ì œê±° */
      flex: 1; padding: 5px; background: white;
      border-right: 2px solid #292929; border-bottom: 2px solid  #292929;
      border-right: 2px solid #fff; border-bottom: 2px solid #fff;
    }
    button { 
      padding: 5px 15px; background: #b89f79; font-weight: bold;
      border-top: 2px solid #fff; border-left: 2px solid #fff;
      border-right: 2px solid #292929; border-bottom: 2px solid  #292929;
      cursor: pointer;
    }
    button:active {
      border-right: 2px solid #292929; border-bottom: 2px solid  #292929;
      border-right: 2px solid #fff; border-bottom: 2px solid #fff;
    }
    b,span {color:#ffffff}
    .tab-btn {
    background: #b89f79; border: 2px outset #fff; color: white; 
    margin-left: 5px; cursor: pointer; font-size: 10px;
  }
  /* ì˜ˆì „ ì§€ë§ìŠ¤ ì…ì²´ ë²„íŠ¼ ìŠ¤íƒ€ì¼ */
    .tab {
        display: inline-flex;
        align-items: center;
        padding: 4px 12px;
        background: #b89f79; /* ê¸°ë³¸ ê°ˆìƒ‰ */
        border: 2px outset #eee; /* ì…ì²´ íš¨ê³¼ */
        cursor: pointer;
        margin-right: 2px;
        font-family: 'Times New Roman', serif;
        font-size: 13px;
    }

    /* ë§ˆìš°ìŠ¤ë¥¼ ì˜¬ë ¸ì„ ë•Œ */
    .tab:hover { background: #a68d66; }

    /* ì„ íƒëœ íƒ­ (ë” ì–´ë‘ìš´ ê°ˆìƒ‰ + ëˆŒë¦° íš¨ê³¼) */
    .tab.active {
        background: #8e7956; 
      
        color: white;
    }

    .tab img { margin-right: 6px; border: 1px solid #777; background: white; }
    .close-btn { margin-left: 8px; color: #600; font-weight: bold; }
    
    #plus-btn {
        padding: 2px 8px;
        background: #b89f79;
        border: 2px outset #eee;
        cursor: pointer;
        font-weight: bold;
    }
    /* home.html ë˜ëŠ” style.css */
html, body {
    margin: 0;
    padding: 0;
    width: 100%;
    height: 100%;
    overflow: hidden; /* ì „ì²´ í˜ì´ì§€ ìŠ¤í¬ë¡¤ì€ ë§‰ê³  */
}

/* í…”ë ˆê·¸ë¨ì´ë‚˜ ì›¹ì‚¬ì´íŠ¸ê°€ ë“¤ì–´ê°€ëŠ” ì»¨í…Œì´ë„ˆ */
#content-area {
    width: 100%;
    height: calc(100vh - 50px); /* íƒ­ ë°” ë†’ì´ê°€ 50pxì´ë¼ë©´ ê·¸ë§Œí¼ ë¹¼ê³  ë‚˜ë¨¸ì§€ ê½‰ ì±„ìš°ê¸° */
    display: block;
}

webview, iframe {
    width: 100%;
    height: 100%;
    border: none;
}
/* ìš°í´ë¦­ ë©”ë‰´ ì „ì²´ ì»¨í…Œì´ë„ˆ */
.retro-menu {
    background-color: #D2B48C; /* ì—°í•œ ê°ˆìƒ‰ (Tan) */
    border-top: 2px solid white;
    border-left: 2px solid white;
    border-bottom: 2px solid black;
    border-right: 2px solid black;
    padding: 4px;
    width: 180px;
    font-family: 'Arial', sans-serif;
    font-size: 13px;
}

/* ë©”ë‰´ ì•„ì´í…œ í•˜ë‚˜í•˜ë‚˜ */
.menu-item-slot,.menu-item {
    background-color: #D2B48C; /* ê¸°ë³¸ ì—°í•œ ê°ˆìƒ‰ */
    border-top: 2px solid white;
    border-left: 2px solid white;
    border-bottom: 2px solid black;
    border-right: 2px solid black;
    padding: 8px 12px;
    margin: 2px;
    cursor: pointer;
    color: black;
    font-weight: bold;
}

/* ë¦¬ì˜¤ë‹˜ì´ ì›í•˜ì‹  Hover íš¨ê³¼ */
.menu-item-slot,.menu-item:hover {
    background-color: #8B4513; /* ì§„í•œ ê°ˆìƒ‰ (SaddleBrown) */
    color: white; /* ì–´ë‘ìš´ ë°°ê²½ì—ì„  ê¸€ìë¥¼ ë°ê²Œ */
}

/* ë²„íŠ¼ì„ ëˆŒë €ì„ ë•Œ ì™ ë“¤ì–´ê°€ëŠ” ëŠë‚Œì„ ì£¼ë ¤ë©´? (ì¶”ê°€ íŒ) */
.menu-item-slot,.menu-item:active {
    border-top: 2px solid black;
    border-left: 2px solid black;
    border-bottom: 2px solid white;
    border-right: 2px solid white;
}
/* ìŠ¬ë¡¯ë“¤ì„ ê°€ë¡œë¡œ ì˜ˆì˜ê²Œ ë°°ì¹˜ */
.slot-grid {
    display: flex;
    gap: 3px;
    padding: 5px;
    margin-bottom: 5px;
}
  </style>
</head>
<body>
  <div class="toolbar1">
<b>gL-1.2.4</b><span id="pageTitle"></span></span>
  <div id="tab-bar" style=" padding: 4px; display: flex; align-items: center;">
    <div id="tabs-container" style="display: flex; overflow-x: auto;">
        </div>
    <button id="plus-btn" onclick="addNewTab()"><b>+</b></button>
</div>
  </div>
  <div class="toolbar">
    <button id="backBtn">â—€</button>
  <button id="forwardBtn">â–¶</button>
  <button id="reloadBtn">ğŸ”„</button>
    <input type="text" id="urlInput" placeholder="write a URL here (example: https://google.com)" />
    <button id="goBtn">Go!</button>
    <button id="homeBtn" >Home</button>
    <button id="CookieBtn" >ğŸª</button>
    
  </div>
  
 
  <script>
    const { ipcRenderer } = require('electron');
    // ê° ë²„íŠ¼ í´ë¦­ ì‹œ ë©”ì¸ í”„ë¡œì„¸ìŠ¤ì— ëª…ë ¹ ì „ë‹¬
  document.getElementById('backBtn').onclick = () => ipcRenderer.send('go-back');
  document.getElementById('forwardBtn').onclick = () => ipcRenderer.send('go-forward');
  document.getElementById('reloadBtn').onclick = () => ipcRenderer.send('reload');
    document.getElementById('goBtn').onclick = () => {
      ipcRenderer.send('load-url', document.getElementById('urlInput').value);
    };
    // Home ë²„íŠ¼ í´ë¦­ ì‹œ (ì¶”ê°€)
  document.getElementById('homeBtn').onclick = () => {
    ipcRenderer.send('go-home'); // ë©”ì¸ í”„ë¡œì„¸ìŠ¤ì— 'go-home' ì‹ í˜¸ë¥¼ ë³´ëƒ„
  };
  // Cookie ë²„íŠ¼ í´ë¦­ ì‹œ (ì¶”ê°€)
  document.getElementById('CookieBtn').onclick = () => {  
    ipcRenderer.send('open-cookie-manager'); // ë©”ì¸ í”„ë¡œì„¸ìŠ¤ì— 'open-cookie-manager' ì‹ í˜¸ë¥¼ ë³´ëƒ„
  };

   
  // ë©”ì¸ í”„ë¡œì„¸ìŠ¤ì—ì„œ ë³´ë‚´ëŠ” 'update-url' ì‹ í˜¸ë¥¼ ëŒ€ê¸°
ipcRenderer.on('update-url', (event, url) => {
  const urlInput = document.getElementById('urlInput');
  urlInput.value = url; // ì£¼ì†Œì°½ í…ìŠ¤íŠ¸ë¥¼ í˜„ì¬ URLë¡œ ë³€ê²½
});


  // [Go!] ë²„íŠ¼ í´ë¦­ ì‹œ
  document.getElementById('goBtn').onclick = () => {
    const url = document.getElementById('urlInput').value;
    
   
    
    ipcRenderer.send('load-url', url);
  };

 
function changeTab(index) {
    // 1. ëª¨ë“  ë²„íŠ¼ì—ì„œ active í´ë˜ìŠ¤ ì œê±°
    const tabs = document.querySelectorAll('.tab-btn');
    tabs.forEach(tab => tab.classList.remove('active'));

    // 2. í˜„ì¬ ëˆ„ë¥¸ ë²„íŠ¼ì—ë§Œ active í´ë˜ìŠ¤ ì¶”ê°€
    document.getElementById('tab' + index).classList.add('active');

    // 3. ë©”ì¸ í”„ë¡œì„¸ìŠ¤ì— íƒ­ ì „í™˜ ì‹ í˜¸ ì „ì†¡
    ipcRenderer.send('switch-tab', index);
  }

  // í˜ì´ì§€ ì œëª© ì—…ë°ì´íŠ¸ ë°›ê¸°
  ipcRenderer.on('update-title', (event, title) => {
    document.getElementById('pageTitle').innerText = title;
  });
 // --- index.html ë‚´ script ë¶€ë¶„ ---

// íƒ­ ì¶”ê°€ ë²„íŠ¼ í´ë¦­ ì‹œ
function addNewTab() {
  // [.tab-item]ì—ì„œ [.tab]ìœ¼ë¡œ ìˆ˜ì •!
  const currentTabs = document.querySelectorAll('.tab').length; 

  if (currentTabs >= 7) {
    alert('max 7 Tab Allowed');
    
      return; 
  }
  ipcRenderer.send('request-new-tab');
}

// ë¡œë”© ì‹œì‘ ì‹ í˜¸ë¥¼ ë°›ìœ¼ë©´ í‘œì‹œ
ipcRenderer.on('tab-loading-start', () => {
    document.getElementById('loading-text').style.opacity = "1";
});

// ë¡œë”© ì™„ë£Œ ì‹ í˜¸ë¥¼ ë°›ìœ¼ë©´ ìˆ¨ê¹€
ipcRenderer.on('tab-loading-stop', () => {
    document.getElementById('loading-text').style.opacity = "0";
});

// íƒ­ ì „í™˜ ì‹œì—ë„ ë¡œë”© ìƒíƒœ í™•ì¸
// index.htmlì˜ <script> íƒœê·¸ ì•ˆì˜ ë‚´ìš©ì„ ì´ê±¸ë¡œ ë°”ê¾¸ì„¸ìš”.
ipcRenderer.on('render-tabs', (event, { tabList, activeIndex }) => {
    const container = document.getElementById('tabs-container');
    container.innerHTML = ''; // ê¸°ì¡´ íƒ­ì„ ì‹¹ ë¹„ìš°ê³  ìƒˆë¡œ ê·¸ë¦¼

    tabList.forEach((tab, i) => {
        const tabEl = document.createElement('div');
        // í™œì„±í™”ëœ íƒ­ì€ active í´ë˜ìŠ¤ë¥¼ ë¶™ì—¬ì„œ ì–´ë‘¡ê²Œ í‘œì‹œ
        tabEl.className = `tab ${i === activeIndex ? 'active' : ''}`;
        
        // íƒ­ í´ë¦­ ì‹œ í•´ë‹¹ ë²ˆí˜¸ë¡œ ì „í™˜
        tabEl.onclick = () => ipcRenderer.send('switch-tab', i);
        
        // ì œëª©ì´ ë„ˆë¬´ ê¸¸ë©´ ìë¥´ê¸°
        const displayTitle = tab.title.length > 12 ? tab.title.substring(0, 10) + '..' : tab.title;
            tabEl.innerHTML = `
                <img src="${tab.icon}" width="16" height="16" onerror="this.src='default-icon.png'">
                <span>${displayTitle}</span>
                <span class="close-btn" onclick="deleteTab(${i}, event)">Ã—</span>
            `;
            // [ì¤‘ìš”] x ë²„íŠ¼ì— ì‚­ì œ ì´ë²¤íŠ¸ ì—°ê²°
        const closeBtn = tabEl.querySelector('.close-btn');
        closeBtn.onclick = (e) => {
            e.stopPropagation(); // íƒ­ì´ ë°”ë€Œì§€ ì•Šê²Œ í´ë¦­ ì´ë²¤íŠ¸ ì „íŒŒ ë§‰ê¸°
            ipcRenderer.send('delete-tab', i);
        };

        container.appendChild(tabEl);
        });
    });
    // loadRecommendations ì•„ë˜ë‚˜ í˜ì´ì§€ ì „í™˜ í•¨ìˆ˜ì— ì¶”ê°€
function fixTelegramLayout() {
    const webview = document.querySelector('webview');
    if (webview) {
        // ì›¹ë·° ë‚´ë¶€ì˜ ìŠ¤íƒ€ì¼ì„ ê°•ì œë¡œ ìˆ˜ì •
        webview.insertCSS(`
            .typed-message { bottom: 0 !important; } 
            .messages-layout { height: 100vh !important; }
        `);
    }
}
window.addEventListener('contextmenu', (e) => {
    e.preventDefault();
    const menu = document.getElementById('custom-context-menu');
    
    // ì´ë¯¸ì§€ ìœ„ì—ì„œ ìš°í´ë¦­í–ˆëŠ”ì§€ í™•ì¸
    const downloadImgItem = document.getElementById('menu-download-img');
    if (e.target.tagName === 'IMG') {
        downloadImgItem.style.display = 'block';
        window.currentImgUrl = e.target.src; // URL ì €ì¥
    } else {
        downloadImgItem.style.display = 'none';
    }

    menu.style.display = 'block';
    menu.style.left = `${e.pageX}px`;
    menu.style.top = `${e.pageY}px`;
});
// ë©”ë‰´ì˜ 'Download Image' ë²„íŠ¼ í´ë¦­ ì‹œ ì‹¤í–‰
function downloadImage() {
    if (currentRightClickedImg) {
        ipcRenderer.send('download-this-image', currentRightClickedImg);
    }
}
// ë©”ë‰´ ë°– í´ë¦­ ì‹œ ë‹«ê¸°
window.addEventListener('click', () => {
    document.getElementById('custom-context-menu').style.display = 'none';
});
</script>
  </script>
</body>
</html>