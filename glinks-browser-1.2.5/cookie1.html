<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>gLinks Cookie Manager</title>
    <style>
        body {
            background-color: #c0c0c0; /* í´ë˜ì‹ ìœˆë„ìš° íšŒìƒ‰ */
            font-family: 'Tahoma', 'Arial', sans-serif;
            font-size: 12px;
            padding: 20px;
        }
        h2 {
            color: #000080;
            border-bottom: 2px solid #808080;
            padding-bottom: 5px;
            margin-top: 0;
        }
        table {
            width: 100%;
            border-collapse: separate;
            border-spacing: 0;
            background-color: white;
            box-shadow: inset 2px 2px #808080, inset -2px -2px #ffffff;
        }
        th {
            background-color: #d4d0c8;
            border: 1px solid;
            border-color: #ffffff #808080 #808080 #ffffff;
            padding: 6px;
            text-shadow: 1px 1px white;
        }
        td {
            padding: 6px;
            border: 1px solid #eeeeee;
        }
        tr:nth-child(even) { background-color: #f9f9f9; }
        
        /* í´ë˜ì‹ ë²„íŠ¼ ìŠ¤íƒ€ì¼ */
        button {
            padding: 4px 12px;
            background-color: #d4d0c8;
            border: 2px outset #ffffff;
            font-size: 11px;
            font-weight: bold;
            cursor: pointer;
            box-shadow: 1px 1px 0px black;
        }
        button:active {
            border: 2px inset #ffffff;
            box-shadow: none;
        }
        button.delete-btn {
            color: #a00000;
        }
         button.nuclear-btn {
            color: #c4b702;
        }
        .vault-container {
            border: 2px inset #ffffff;
            padding: 10px;
            background: #e0e0e0;
        }
    </style>
</head>
<body>
    <h2 id="title">ğŸª gLinksWWW Cookie Manager</h2>
    <div class="vault-container">
        <button class="nuclear-btn" onclick="nuclearClear()">NUCLEAR BUTTON</button>
        <table>
            <thead>
                <tr>
                    <th>Domain</th>
                   
                    <th>Action</th>
                </tr>
            </thead>
            <tbody id="cookie-list">
                </tbody>
        </table>
    </div>



<script>
const { ipcRenderer } = require('electron');

// 1. URLì—ì„œ ë„ë©”ì¸ ì¶”ì¶œ
const urlParams = new URLSearchParams(window.location.search);
const domain = urlParams.get('domain');

document.addEventListener('DOMContentLoaded', async () => {
    // domainì´ ì—†ì–´ë„ ê¸°ë³¸ ì œëª©ì€ ë‚˜ì˜¤ê²Œ ì²˜ë¦¬
    if (domain) {
        const titleElement = document.getElementById('title');
        if (titleElement) titleElement.innerText = `ğŸª ${domain} Cookie Manager`;
        
        // 2. ë©”ì¸ í”„ë¡œì„¸ìŠ¤ì— í•´ë‹¹ ë„ë©”ì¸ì˜ ì¿ í‚¤ ìš”ì²­ (í•¸ë“¤ëŸ¬ ì´ë¦„ í™•ì¸!)
        const cookies = await ipcRenderer.invoke('get-cookies-domain', domain);
        renderCookieList(cookies);
    }
});

// 3. ë¦¬ìŠ¤íŠ¸ ë‚˜ì—´ (tr íƒœê·¸ ì¶”ê°€!)
function renderCookieList(cookies) {
    const listContainer = document.getElementById('cookie-list');
    if (!cookies || cookies.length === 0) {
        listContainer.innerHTML = '<tr><td colspan="2">No cookies found.</td></tr>';
        return;
    }

    listContainer.innerHTML = cookies.map(cookie => `
        <tr>
            <td>
                <span><strong>${cookie.name}</strong>: ${cookie.value.substring(0, 20)}...</span>
            </td>
            <td>
                <button onclick="openEditModal('${cookie.name}', '${encodeURIComponent(cookie.value)}')">Edit</button>
            </td>
        </tr>
    `).join('');
}

function openEditModal(name, encodedValue) {
    // 1. í˜„ì¬ cookie1.htmlì´ ì•Œê³  ìˆëŠ” 'domain' ë³€ìˆ˜ë¥¼ í™œìš©í•©ë‹ˆë‹¤.
    // 2. ì¿ í‚¤ ì´ë¦„(name)ê³¼ ë„ë©”ì¸ì„ ì¿¼ë¦¬ ìŠ¤íŠ¸ë§ìœ¼ë¡œ ë„˜ê¹ë‹ˆë‹¤.
    // ê°’(value)ì€ ì–´ì°¨í”¼ cookieedit.htmlì—ì„œ ë‹¤ì‹œ ë¶ˆëŸ¬ì˜¬ ê±°ë¼ ì´ë¦„ë§Œ ì •í™•íˆ ë„˜ê¸°ë©´ ë©ë‹ˆë‹¤!
    
    const targetUrl = `cookieedit.html?domain=${encodeURIComponent(domain)}&name=${encodeURIComponent(name)}`;
    
    window.location.href = targetUrl;
}
</script>
</body>
</html>